{% extends "base.html" %}

{% block title %}8 –∫–ª–∞—Å—Å{% endblock %}

<style>
</style>
{% block content %}
    <h1 class="text-center my-4" style="color: #4f76ff; font-weight: 700">–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ</h1>
    <div class="container mb-4">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}

                    <div class="alert alert-danger" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <div class="container py-5 px-5" style="background: rgba(150,70,241,0.54); border-radius: 10px">
            <div id="content" style="height: 400px; border-radius: 10px"></div>
            <div id="controls">
                <div class="input-group mt-3">
                    <span class="input-group-text" id="basic-addon1">–¢–æ–∫ (A)</span>
                    <input type="number" class="form-control" id="current" placeholder="0" aria-label="Username"
                           aria-describedby="basic-addon1" value="1" step="0.1">
                </div>
                <div class="input-group mt-3">
                    <span class="input-group-text" id="basic-addon1">–ó–∞—Ä—è–¥ (q)</span>
                    <input type="number" class="form-control" id="charge" placeholder="0" aria-label="Username"
                           aria-describedby="basic-addon1" value="1" step="0.1">
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div id="formula">
                        <h2 class="text-light mt-4">–§–æ—Ä–º—É–ª–∞: <span class="badge fs-1"
                                                                   style="background: rgba(172,100,255,0.54)">
                            \( U = \frac{A}{q} \)</span>
                        </h2>
                    </div>
                </div>
            </div>
            <div class="row">
                <ul class="list-group">
                    <li class="list-group-item active text-light fs-3" style="background: rgba(172,100,255,0.54); border-color: whitesmoke" aria-current="true">–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</li>
                    <li class="list-group-item bg-transparent text-light fs-4">\( A \) - –≠—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π –∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–∫–∞ –≤ —Ü–µ–ø–∏. –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ç–æ–∫–∞ - –∞–º–ø–µ—Ä (ùê¥)</li>
                    <li class="list-group-item bg-transparent text-light fs-4">\( q \) - –≠—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π –∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –∑–∞—Ä—è–¥–∞, –ø—Ä–æ—Ö–æ–¥—è—â–µ–≥–æ —á–µ—Ä–µ–∑ —Å–µ–∫—Ü–∏—é —Ü–µ–ø–∏ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è. –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –∑–∞—Ä—è–¥–∞ - –∫—É–ª–æ–Ω (ùê∂)</li>
                    <li class="list-group-item bg-transparent text-light fs-4">\( U \) - –≠—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –∏–∑–º–µ—Ä—è–µ–º–æ–µ –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏ —Ü–µ–ø–∏. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –æ–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ç–æ–∫–∞ –∫ –∑–∞—Ä—è–¥—É. –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è - –≤–æ–ª—å—Ç (ùëâ)</li>
                </ul>
            </div>
        </div>


    </div>

    <script>
        function setup() {
            let content = document.getElementById('content');
            let canvas = createCanvas(content.offsetWidth, content.offsetHeight);
            canvas.parent(content);
            canvas.style('border-radius', '10px');
            angleMode(DEGREES);
        }

        function draw() {
            background(164, 84, 255);

            let current = parseFloat(document.getElementById('current').value);
            let charge = parseFloat(document.getElementById('charge').value);

            let voltage = 0;
            if (charge !== 0) {
                voltage = current / charge;
            }

            // Display voltage calculation formula and variables
            textSize(24);
            fill(255);
            text(`U = A / q`, 100, 50);
            textSize(18);
            text(`–¢–æ–∫ (A): ${current} A`, 100, 100);
            text(`–ó–∞—Ä—è–¥ (q): ${charge} C`, 100, 130);
            text(`–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ (U): ${voltage.toFixed(2)} V`, 100, 160);

            // Draw the voltmeter
            drawVoltmeter(voltage);
        }

        function drawVoltmeter(voltage) {
            translate(width / 2, height / 2);

            // Draw the outer circle
            stroke(255);
            strokeWeight(4);
            noFill();
            ellipse(0, 0, 300, 300);

            // Draw the ticks
            for (let angle = -90; angle <= 90; angle += 10) {
                let x1 = cos(angle) * 140;
                let y1 = sin(angle) * 140;
                let x2 = cos(angle) * 150;
                let y2 = sin(angle) * 150;
                strokeWeight(2);
                line(x1, y1, x2, y2);

                // Draw numbers
                let xText = cos(angle) * 180;
                let yText = sin(angle) * 180;
                noStroke();
                fill(255);
                textSize(16);
                textAlign(CENTER, CENTER);
                text(Math.round((angle + 90) / 18 * 2)/2, xText, yText);
            }

            // Draw the needle
            let needleAngle = map(voltage, 0, 10, -90, 90); // Adjust the range as needed
            stroke(255, 0, 0);
            strokeWeight(4);
            line(0, 0, cos(needleAngle) * 140, sin(needleAngle) * 140);

            // Draw the center of the needle
            fill(255, 0, 0);
            noStroke();
            ellipse(0, 0, 10, 10);
        }
    </script>
{% endblock %}
