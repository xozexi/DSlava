{% extends "base.html" %}

{% block title %}8 –∫–ª–∞—Å—Å{% endblock %}

<style>
</style>
{% block content %}
    <h1 class="text-center my-4" style="color: #4f76ff; font-weight: 700">–ó–∞–∫–æ–Ω –¥–ª—è —É—á–∞—Å—Ç–∫–æ–≤ —Ü–µ–ø–∏ (–ó–∞–∫–æ–Ω –û–º–∞)</h1>
    <div class="container mb-4">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}

                    <div class="alert alert-danger" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <div class="container py-5 px-5" style="background: rgba(150,70,241,0.54); border-radius: 10px">
            <div id="content" style="height: 400px; border-radius: 10px"></div>
            <div id="controls">
                <div class="input-group mt-3">
                    <span class="input-group-text" id="basic-addon1">–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ (U)</span>
                    <input type="number" class="form-control" id="voltage" placeholder="0" aria-label="Username"
                           aria-describedby="basic-addon1" value="10" step="0.1">
                </div>
                <div class="input-group mt-3">
                    <span class="input-group-text" id="basic-addon1">–°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ (R):</span>
                    <input type="number" class="form-control" id="resistance" placeholder="0" aria-label="Username"
                           aria-describedby="basic-addon1" value="5" step="0.1">
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div id="formula">
                        <h2 class="text-light mt-4">–§–æ—Ä–º—É–ª–∞: <span class="badge fs-1"
                                                                   style="background: rgba(172,100,255,0.54)">
                           \( I = \frac{U}{R} \)</span>
                        </h2>
                    </div>
                </div>
            </div>
            <div class="row">
                <ul class="list-group">
                    <li class="list-group-item active text-light fs-3"
                        style="background: rgba(172,100,255,0.54); border-color: whitesmoke" aria-current="true">
                        –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
                    </li>
                    <li class="list-group-item bg-transparent text-light fs-4">\( I \) –¢–æ–∫ - –≠—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π –∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–∫–∞ –≤ —Ü–µ–ø–∏. –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ç–æ–∫–∞ - –∞–º–ø–µ—Ä (ùê¥)
                    </li>
                    <li class="list-group-item bg-transparent text-light fs-4">\( U \) –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ - –≠—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π –∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏ –≤ —Ü–µ–ø–∏. –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è - –≤–æ–ª—å—Ç (ùëâ).
                        –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –∑–∞—Ä—è–¥–∞ - –∫—É–ª–æ–Ω (ùê∂)
                    </li>
                    <li class="list-group-item bg-transparent text-light fs-4">\( U \) –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ- –≠—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Ü–µ–ø–∏. –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ –æ–º–∞—Ö (Œ©).
                    </li>
                </ul>
            </div>
        </div>


    </div>

    <script>
        let transistorColor;

        function setup() {
            let content = document.getElementById('content');
            let canvas = createCanvas(content.offsetWidth, content.offsetHeight);
            canvas.parent(content);
            canvas.style('border-radius', '10px');
            angleMode(DEGREES);

            transistorColor = color(255, 0, 0); // –ù–∞—á–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞
        }

        function draw() {
            background(164, 84, 255);

            let voltage = parseFloat(document.getElementById('voltage').value);
            let resistance = parseFloat(document.getElementById('resistance').value);

            let power = (voltage * voltage) / resistance; // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –º–æ—â–Ω–æ—Å—Ç—å –∫–∞–∫ U^2 / R

            // –ò–∑–º–µ–Ω—è–µ–º —Ü–≤–µ—Ç —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ—â–Ω–æ—Å—Ç–∏
            let heatingColor = map(power, 0, 100, 0, 255); // –ú–∞–ø–ø–∏–º –º–æ—â–Ω–æ—Å—Ç—å –Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–≤–µ—Ç–æ–≤
            transistorColor = color(255 - heatingColor, heatingColor, 0);

            let current = 0;
            if (resistance !== 0) {
                current = voltage / resistance;
            }
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–µ–∫—Å—Ç —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
            textSize(24);
            fill(255);
            text(`I = U / R`, 100, 50);
            textSize(18);
            text(`–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ (U): ${voltage} V`, 100, 100);
            text(`–°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ (R): ${resistance} Œ©`, 100, 130);
            text(`–¢–æ–∫ (I): ${current.toFixed(2)} A`, 100, 160);

            // –†–∏—Å—É–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é
            drawTransistor(power);
        }

        function drawTransistor(power) {
            stroke(255)
            translate(width / 2, height / 2);

            // –†–∏—Å—É–µ–º —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä (–ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫)
            fill(transistorColor);
            rectMode(CENTER);
            rect(0, 0, 100, 200);

            // –†–∏—Å—É–µ–º "–Ω–∞–≥—Ä–µ–≤" —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏ —Ü–≤–µ—Ç–∞)
            let heatingBrightness = map(power, 0, 100, 0, 255);
            fill(255, 255, 255, heatingBrightness);
            rect(0, 0, 100, 200);
            stroke(0,0,0,0)

        }
    </script>
{% endblock %}
